<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exchange Rate Calculations - CFA Economics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .header-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .content-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #667eea;
        }
        
        .table-container {
            overflow-x: auto;
            margin: 1rem 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .table-container table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        
        .table-container th {
            background: #f8fafc;
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .table-container td {
            padding: 12px 16px;
            border-bottom: 1px solid #e5e7eb;
            color: #4b5563;
        }
        
        .table-container tr:hover {
            background: #f9fafb;
        }
        
        .callout {
            margin: 1.5rem 0;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .callout-note {
            background: #eff6ff;
            border-color: #3b82f6;
            color: #1e40af;
        }
        
        .callout-warning {
            background: #fef3c7;
            border-color: #f59e0b;
            color: #92400e;
        }
        
        .callout-success {
            background: #ecfdf5;
            border-color: #10b981;
            color: #047857;
        }
        
        .progress-container {
            background: white;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            position: sticky;
            top: 20px;
            z-index: 10;
        }
        
        .progress-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
            justify-content: center;
        }
        
        .progress-step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: fit-content;
        }
        
        .progress-step.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }
        
        .progress-step:not(.active) {
            background: #f1f5f9;
            color: #64748b;
        }
        
        .progress-step:not(.active):hover {
            background: #e2e8f0;
            transform: translateY(-1px);
        }
        
        .step-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .progress-step.active .step-circle {
            background: rgba(255, 255, 255, 0.3);
            color: white;
        }
        
        .progress-step:not(.active) .step-circle {
            background: #cbd5e1;
            color: #475569;
        }
        
        .step-label {
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .card h3 {
            color: #1f2937;
            margin-bottom: 1rem;
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .formula {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-weight: bold;
            color: #374151;
        }
        
        .example {
            background: #fef7ff;
            border: 1px solid #e879f9;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .example h4 {
            color: #a21caf;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .calculation-step {
            background: #f0f9ff;
            border: 1px solid #0284c7;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .calculation-step h5 {
            color: #0284c7;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .progress-steps {
                flex-direction: column;
                align-items: stretch;
            }
            
            .progress-step {
                justify-content: center;
                min-width: auto;
            }
            
            .step-label {
                white-space: normal;
                text-align: center;
            }
            
            .content-section {
                padding: 1rem;
                margin: 1rem 0;
            }
            
            .card-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-700">
    <div class="max-w-5xl mx-auto px-4 py-8">
        <header class="header-gradient text-white p-8 rounded-2xl mb-8 text-center">
            <h1 class="text-4xl font-bold mb-2">Exchange Rate Calculations</h1>
            <p class="text-xl opacity-90">CFA Economics - Chapter 8</p>
            <div class="mt-4">
                <a href="index.html" class="inline-block bg-white bg-opacity-20 hover:bg-opacity-30 px-6 py-2 rounded-lg transition-all">
                    ‚Üê Back to Index
                </a>
            </div>
        </header>

        </div>

        <main>
            <section id="introduction" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Introduction to Exchange Rate Calculations</h2>
                <p class="mb-4">Mastering exchange rate calculations is crucial for the CFA exam and practical application in international finance. This chapter provides step-by-step approaches to solve various types of exchange rate problems.</p>
                
                <h3 class="text-xl font-semibold mb-3 text-gray-700">Key Calculation Types</h3>
                <div class="card-grid">
                    <div class="card">
                        <h3>Spot Rate Conversions</h3>
                        <p>Converting between currencies using current exchange rates, including bid-ask spread considerations.</p>
                    </div>
                    <div class="card">
                        <h3>Cross Rate Calculations</h3>
                        <p>Determining exchange rates between two currencies when only their rates against a third currency are known.</p>
                    </div>
                    <div class="card">
                        <h3>Forward Rate Calculations</h3>
                        <p>Computing future exchange rates using interest rate parity and spot rates.</p>
                    </div>
                    <div class="card">
                        <h3>Investment Return Calculations</h3>
                        <p>Calculating total returns on foreign investments including currency gains/losses.</p>
                    </div>
                </div>

                <div class="callout callout-note">
                    <strong>Important:</strong> Always pay attention to currency conventions (which currency is base vs. quote) and whether you're dealing with direct or indirect quotes.
                </div>
            </section>

            <section id="basic-calculations" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Basic Exchange Rate Calculations</h2>
                <p class="mb-4">Understanding fundamental conversion methods forms the foundation for more complex calculations.</p>

                <h3 class="text-xl font-semibold mb-3 text-gray-700">Currency Conversion Formula</h3>
                <div class="formula">
                    Amount in Target Currency = Amount in Base Currency √ó Exchange Rate
                </div>

                <div class="example">
                    <h4>Example 1: Basic Currency Conversion</h4>
                    <p><strong>Problem:</strong> Convert $10,000 USD to EUR given EUR/USD = 1.0850</p>
                    
                    <div class="calculation-step">
                        <h5>Step 1: Identify the conversion needed</h5>
                        <p>We need to convert from USD to EUR. The rate given is EUR/USD = 1.0850, meaning 1 EUR = 1.0850 USD.</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 2: Set up the calculation</h5>
                        <p>EUR Amount = USD Amount √∑ EUR/USD rate</p>
                        <p>EUR Amount = $10,000 √∑ 1.0850</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 3: Calculate the result</h5>
                        <p>EUR Amount = ‚Ç¨9,216.59</p>
                    </div>
                </div>

                <h3 class="text-xl font-semibold mb-3 mt-6 text-gray-700">Bid-Ask Spread Considerations</h3>
                <p class="mb-4">In real markets, there are different rates for buying and selling currencies.</p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Transaction Type</th>
                                <th>Rate Used</th>
                                <th>Explanation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Buying Base Currency</td>
                                <td>Ask Rate</td>
                                <td>Higher rate - bank's selling price</td>
                            </tr>
                            <tr>
                                <td>Selling Base Currency</td>
                                <td>Bid Rate</td>
                                <td>Lower rate - bank's buying price</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="example">
                    <h4>Example 2: Bid-Ask Spread Calculation</h4>
                    <p><strong>Given:</strong> EUR/USD Bid = 1.0849, EUR/USD Ask = 1.0851</p>
                    <p><strong>Problem:</strong> Calculate the cost to convert $100,000 to EUR and immediately back to USD</p>
                    
                    <div class="calculation-step">
                        <h5>Step 1: Convert USD to EUR (use ask rate)</h5>
                        <p>EUR = $100,000 √∑ 1.0851 = ‚Ç¨92,161.46</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 2: Convert EUR back to USD (use bid rate)</h5>
                        <p>USD = ‚Ç¨92,161.46 √ó 1.0849 = $99,981.62</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 3: Calculate the transaction cost</h5>
                        <p>Cost = $100,000 - $99,981.62 = $18.38</p>
                    </div>
                </div>
            </section>

            <section id="cross-rates" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Cross Rate Calculations</h2>
                <p class="mb-4">Cross rates allow us to find exchange rates between two currencies using their rates against a common third currency (typically USD).</p>

                <h3 class="text-xl font-semibold mb-3 text-gray-700">Cross Rate Formulas</h3>
                <div class="card-grid">
                    <div class="card">
                        <h3>Direct Cross Rate</h3>
                        <div class="formula mt-3">
                            A/B = (A/USD) √∑ (B/USD)
                        </div>
                        <p class="mt-3">When both currencies are quoted in terms of USD</p>
                    </div>
                    <div class="card">
                        <h3>Inverse Cross Rate</h3>
                        <div class="formula mt-3">
                            A/B = (USD/A) √ó (B/USD)
                        </div>
                        <p class="mt-3">When one currency is quoted against USD and the other has USD in numerator</p>
                    </div>
                </div>

                <div class="example">
                    <h4>Example 3: Calculating EUR/JPY Cross Rate</h4>
                    <p><strong>Given:</strong></p>
                    <ul class="list-disc ml-6 mb-3">
                        <li>EUR/USD = 1.0850</li>
                        <li>USD/JPY = 110.25</li>
                    </ul>
                    
                    <div class="calculation-step">
                        <h5>Step 1: Identify the calculation method</h5>
                        <p>We have EUR/USD and USD/JPY. To find EUR/JPY, we multiply these rates.</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 2: Apply the cross rate formula</h5>
                        <p>EUR/JPY = EUR/USD √ó USD/JPY</p>
                        <p>EUR/JPY = 1.0850 √ó 110.25</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 3: Calculate the result</h5>
                        <p>EUR/JPY = 119.62</p>
                        <p><strong>Interpretation:</strong> 1 EUR = 119.62 JPY</p>
                    </div>
                </div>

                <div class="example">
                    <h4>Example 4: Calculating GBP/CHF Cross Rate</h4>
                    <p><strong>Given:</strong></p>
                    <ul class="list-disc ml-6 mb-3">
                        <li>GBP/USD = 1.3625</li>
                        <li>USD/CHF = 0.9180</li>
                    </ul>
                    
                    <div class="calculation-step">
                        <h5>Step 1: Set up the calculation</h5>
                        <p>GBP/CHF = GBP/USD √ó USD/CHF</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 2: Calculate</h5>
                        <p>GBP/CHF = 1.3625 √ó 0.9180 = 1.2508</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 3: Verify the logic</h5>
                        <p>1 GBP = 1.3625 USD, and 1 USD = 0.9180 CHF</p>
                        <p>Therefore: 1 GBP = 1.2508 CHF ‚úì</p>
                    </div>
                </div>
            </section>

            <section id="forward-rates" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Forward Rate Calculations</h2>
                <p class="mb-4">Forward rates are calculated using interest rate parity theory and current spot rates.</p>

                <h3 class="text-xl font-semibold mb-3 text-gray-700">Interest Rate Parity Formula</h3>
                <div class="formula">
                    Forward Rate = Spot Rate √ó [(1 + rd √ó t/360) / (1 + rf √ó t/360)]
                    <br><br>
                    Where:<br>
                    rd = domestic interest rate<br>
                    rf = foreign interest rate<br>
                    t = time to maturity in days
                </div>

                <div class="example">
                    <h4>Example 5: 6-Month EUR/USD Forward Rate</h4>
                    <p><strong>Given:</strong></p>
                    <ul class="list-disc ml-6 mb-3">
                        <li>Current EUR/USD spot rate: 1.0850</li>
                        <li>US 6-month interest rate: 2.75%</li>
                        <li>Eurozone 6-month interest rate: 1.25%</li>
                        <li>Time period: 180 days</li>
                    </ul>
                    
                    <div class="calculation-step">
                        <h5>Step 1: Identify domestic and foreign rates</h5>
                        <p>For EUR/USD from US perspective: USD is domestic (rd = 2.75%), EUR is foreign (rf = 1.25%)</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 2: Apply the forward rate formula</h5>
                        <p>Forward Rate = 1.0850 √ó [(1 + 0.0275 √ó 180/360) / (1 + 0.0125 √ó 180/360)]</p>
                        <p>Forward Rate = 1.0850 √ó [(1 + 0.01375) / (1 + 0.00625)]</p>
                        <p>Forward Rate = 1.0850 √ó [1.01375 / 1.00625]</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 3: Calculate the result</h5>
                        <p>Forward Rate = 1.0850 √ó 1.00745 = 1.0931</p>
                        <p><strong>Result:</strong> 6-month EUR/USD forward rate = 1.0931</p>
                    </div>
                </div>

                <h3 class="text-xl font-semibold mb-3 mt-6 text-gray-700">Forward Premium/Discount Calculation</h3>
                <div class="formula">
                    Forward Premium (%) = [(Forward Rate - Spot Rate) / Spot Rate] √ó 100%
                </div>

                <div class="example">
                    <h4>Example 6: Forward Premium Calculation</h4>
                    <p><strong>Using the result from Example 5:</strong></p>
                    <p>Spot Rate = 1.0850, Forward Rate = 1.0931</p>
                    
                    <div class="calculation-step">
                        <h5>Calculate the forward premium</h5>
                        <p>Premium = [(1.0931 - 1.0850) / 1.0850] √ó 100%</p>
                        <p>Premium = [0.0081 / 1.0850] √ó 100% = 0.747%</p>
                        <p><strong>Result:</strong> EUR trades at a 0.747% forward premium (annualized: 1.494%)</p>
                    </div>
                </div>
            </section>

            <section id="investment-returns" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Foreign Investment Return Calculations</h2>
                <p class="mb-4">When investing in foreign assets, total return includes both the asset return and currency effects.</p>

                <h3 class="text-xl font-semibold mb-3 text-gray-700">Total Return Formula</h3>
                <div class="formula">
                    Total Return = Asset Return + Currency Return + (Asset Return √ó Currency Return)
                    <br><br>
                    OR<br><br>
                    Total Return = (1 + Asset Return) √ó (1 + Currency Return) - 1
                </div>

                <div class="example">
                    <h4>Example 7: US Investment in European Stocks</h4>
                    <p><strong>Scenario:</strong> US investor buys European stocks at the beginning of the year</p>
                    <p><strong>Given:</strong></p>
                    <ul class="list-disc ml-6 mb-3">
                        <li>Initial EUR/USD rate: 1.0800</li>
                        <li>Final EUR/USD rate: 1.1200</li>
                        <li>Stock return in EUR: +12%</li>
                    </ul>
                    
                    <div class="calculation-step">
                        <h5>Step 1: Calculate currency return</h5>
                        <p>Currency Return = (Final Rate - Initial Rate) / Initial Rate</p>
                        <p>Currency Return = (1.1200 - 1.0800) / 1.0800 = 0.04 / 1.0800 = 3.70%</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 2: Calculate total return</h5>
                        <p>Total Return = 0.12 + 0.037 + (0.12 √ó 0.037)</p>
                        <p>Total Return = 0.12 + 0.037 + 0.00444 = 0.1614</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 3: Final result</h5>
                        <p><strong>Total Return in USD: +16.14%</strong></p>
                        <p>Asset return: +12.00%, Currency return: +3.70%, Interaction: +0.44%</p>
                    </div>
                </div>

                <div class="example">
                    <h4>Example 8: Currency Hedged vs. Unhedged Returns</h4>
                    <p><strong>Scenario:</strong> Compare hedged and unhedged investment returns</p>
                    <p><strong>Given:</strong></p>
                    <ul class="list-disc ml-6 mb-3">
                        <li>Japanese stock return: +8% (in JPY)</li>
                        <li>USD/JPY initial: 110.00</li>
                        <li>USD/JPY final: 108.50</li>
                        <li>Forward rate used for hedging: 109.75</li>
                    </ul>
                    
                    <div class="calculation-step">
                        <h5>Unhedged Return Calculation</h5>
                        <p>Currency Return = (108.50 - 110.00) / 110.00 = -1.36%</p>
                        <p>Total Return = 0.08 + (-0.0136) + (0.08 √ó -0.0136) = 6.53%</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Hedged Return Calculation</h5>
                        <p>With currency hedging, only asset return applies: +8.00%</p>
                        <p>The forward contract eliminates currency risk</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Comparison</h5>
                        <p>Unhedged return: +6.53% | Hedged return: +8.00%</p>
                        <p>Hedging added +1.47% by eliminating negative currency impact</p>
                    </div>
                </div>
            </section>

            <section id="practice-problems" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Practice Problems</h2>
                <p class="mb-4">Test your understanding with these CFA-style exchange rate calculation problems.</p>

                <div class="example">
                    <h4>Practice Problem 1: Cross Rate Arbitrage</h4>
                    <p><strong>Given market quotes:</strong></p>
                    <ul class="list-disc ml-6 mb-3">
                        <li>EUR/USD = 1.0850</li>
                        <li>GBP/USD = 1.3625</li>
                        <li>EUR/GBP (quoted) = 0.7950</li>
                    </ul>
                    <p><strong>Question:</strong> Is there an arbitrage opportunity? Calculate the profit from trading ‚Ç¨1,000,000.</p>
                    
                    <div class="calculation-step">
                        <h5>Step 1: Calculate implied EUR/GBP cross rate</h5>
                        <p>Implied EUR/GBP = EUR/USD √∑ GBP/USD = 1.0850 √∑ 1.3625 = 0.7963</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 2: Compare with market quote</h5>
                        <p>Market quote: 0.7950 | Implied rate: 0.7963</p>
                        <p>EUR is undervalued in the cross rate ‚Üí Buy EUR/GBP, Sell EUR/USD, Buy GBP/USD</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Step 3: Execute arbitrage</h5>
                        <p>1. Convert ‚Ç¨1,000,000 ‚Üí $1,085,000 (sell EUR/USD)</p>
                        <p>2. Convert $1,085,000 ‚Üí ¬£796,330 (buy GBP/USD at 1.3625)</p>
                        <p>3. Convert ¬£796,330 ‚Üí ‚Ç¨1,001,634 (sell EUR/GBP at 0.7950)</p>
                        <p><strong>Profit: ‚Ç¨1,634</strong></p>
                    </div>
                </div>

                <div class="example">
                    <h4>Practice Problem 2: Multi-Period Forward Rate</h4>
                    <p><strong>Given:</strong></p>
                    <ul class="list-disc ml-6 mb-3">
                        <li>Current AUD/USD spot: 0.7250</li>
                        <li>Australian 1-year rate: 3.50%</li>
                        <li>US 1-year rate: 2.25%</li>
                    </ul>
                    <p><strong>Question:</strong> Calculate the 1-year forward AUD/USD rate and determine if AUD trades at a premium or discount.</p>
                    
                    <div class="calculation-step">
                        <h5>Solution:</h5>
                        <p>Forward = 0.7250 √ó [(1 + 0.0225) / (1 + 0.035)]</p>
                        <p>Forward = 0.7250 √ó [1.0225 / 1.035] = 0.7250 √ó 0.9879 = 0.7162</p>
                        <p>Premium/Discount = (0.7162 - 0.7250) / 0.7250 = -1.21%</p>
                        <p><strong>Result: AUD trades at a 1.21% forward discount</strong></p>
                    </div>
                </div>

                <div class="callout callout-success">
                    <strong>Exam Tips:</strong>
                    <ul class="list-disc ml-6 mt-2">
                        <li>Always check currency conventions and quote directions</li>
                        <li>Use dimensional analysis to verify your calculations</li>
                        <li>Remember that higher interest rate currencies typically trade at forward discounts</li>
                        <li>Practice converting between different quote conventions (direct/indirect)</li>
                    </ul>
                </div>
            </section>
        </main>

        <div class="content-section mt-8 text-center">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">Chapter Complete! üéâ</h2>
            <p class="mb-6">You've completed all 8 chapters of the CFA Economics curriculum. Great work!</p>
            
            <div class="flex flex-wrap justify-center gap-4">
                <a href="chapter7.html" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-all">
                    ‚Üê Previous: Currency Exchange Rates
                </a>
                <a href="chapter1.html" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-all">
                    Review Chapter 1
                </a>
                <a href="index.html" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-all">
                    Back to Index
                </a>
            </div>
        </div>
    </div>

    <script>
        function updateProgressSteps() {
            const sections = document.querySelectorAll('section');
            const steps = document.querySelectorAll('.progress-step');
            
            let currentSection = '';
            const scrollPosition = window.scrollY + 200; // Offset for better UX
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    currentSection = section.id;
                }
            });
            
            steps.forEach(step => {
                const stepSection = step.dataset.section;
                if (stepSection === currentSection) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
        }

        // Update on scroll
        window.addEventListener('scroll', updateProgressSteps);
        
        // Update on page load
        document.addEventListener('DOMContentLoaded', updateProgressSteps);

        // Add click handlers for progress steps
        document.querySelectorAll('.progress-step').forEach(step => {
            step.addEventListener('click', () => {
                const sectionId = step.dataset.section;
                const section = document.getElementById(sectionId);
                if (section) {
                    section.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>